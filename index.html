<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚»ãƒƒãƒˆãƒªã‚¹ãƒˆ</title>
    <style>
        

body {
  font-family: Arial, sans-serif;
}
#setlist {
  list-style: none;
  padding: 10px;
  min-height: 200px;
  background: #f0f0f0;
  border: 1px solid #aaa;
  margin: 10px 0;
  max-height: 500px;
  overflow-y: auto;
}

.item {
  padding: 10px;
  margin: 5px;
  border: 1px solid #aaa;
  cursor: grab;
  color: white;
}

.dragging {
  opacity: 0.5;
}
 
/* ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */
.menu-button {   
  display: block;
  position: fixed;
  top: 25px;
  right: 30px;
  width: 30px;
  height: 30px;
  z-index: 100;
  cursor: pointer;
}

.menu-button span {
  position: absolute;
  display: block;
  left: 0;
  width: 30px;
  height: 2px;
  background-color: #333;
  transition: all 0.5s;
  background-origin: 4px;
}

.menu-button span:nth-child(1){
  top:4px;
}
.menu-button span:nth-child(2){
  top:14px;
}
.menu-button span:nth-child(3){
  bottom: 4px;
}

.menu {
  position: fixed;
  top: 0;
  right: -320px;
  width: 300px;
  height: 100vh;
  background: white;
  box-shadow: -4px 0px 6px rgba(0, 0, 0, 0.2);
  padding: 10px;
  transition: right 0.3s ease-in-out;
  z-index: 99;
  overflow-y: auto;/* è¿½åŠ : ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒé•·ããªã‚‹ã¨ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ */
}
.menu.open {
    right: 0;
}

/* âœ– ãƒœã‚¿ãƒ³ */
.close-button {
  position: absolute;
  top: 25px;
  right: 30px;
  width: 30px;
  height: 30px;
  color: white;
  font-size: 20px;
  text-align: center;
  line-height: 30px;
  border-radius: 50%;
  cursor: pointer;
}

.close-button span {
  position: absolute;
  display: block;
  left: 0;
  width: 30px;
  height: 2px;
  background-color: #333;
  transition: all 0.5s;
  background-origin: 4px;
}

.menu-button.open span:nth-child(1) {
  transform: translateY(10px) rotate(-315deg);
}
.menu-button.open span:nth-child(2) {
  opacity: 0;
}
.menu-button.open span:nth-child(3) {
  transform: translateY(-10px) rotate(315deg);
}


/* ã‚¢ãƒ«ãƒãƒ ãƒªã‚¹ãƒˆ */
.album-list {
  list-style: none;
  padding: 0;
  margin: 0;
  /* color:#f0e6e6; */
}
.album-list li {
  padding: 10px;
  background: #fffefe;
  border-bottom: 1px solid #ccc;
  cursor: pointer;
}
.album-list li:hover {
  background: #ddd;
}

/* ã‚¢ãƒ«ãƒãƒ ã”ã¨ã®æ›²ãƒªã‚¹ãƒˆ */
.album-content {
  display: none;
  padding: 5px;
  background: #f8f8f8;
  border: 1px solid #ddd;
  margin: 0;
  list-style: none;
}
.album-content.active {
  display: block;
}


/* ã‚¢ãƒ«ãƒãƒ 1ã®è‰²è¨­å®š */
.album-list li.album1-tab { background-color: #efefef; } /* ã‚¿ãƒ–ã®è‰² */
.album1 { --album-color: #efefef; } /* ã‚¢ãƒ«ãƒãƒ 1ã®åŸºæº–è‰² */

/* ã‚¢ãƒ«ãƒãƒ 2ã®è‰²è¨­å®š */
.album-list li.album2-tab { background-color: rgba(255, 255, 2, 0.733); } /* ã‚¿ãƒ–ã®è‰² */
.album2 { --album-color: rgba(255, 255, 2, 0.733); } /* ã‚¢ãƒ«ãƒãƒ 2ã®åŸºæº–è‰² */

/* ã‚¢ãƒ«ãƒãƒ 3ã®è‰²è¨­å®š */
.album-list li.album3-tab { 
  background-color: #000000; 
  color: #ffffff;
} /* ã‚¿ãƒ–ã®è‰² */
.album3 { --album-color: #000000; } /* ã‚¢ãƒ«ãƒãƒ 3ã®åŸºæº–è‰² */

/* ã‚¢ãƒ«ãƒãƒ 4ã®è‰²è¨­å®š */
.album-list li.album4-tab { background-color: #018221; } /* ã‚¿ãƒ–ã®è‰² */
.album4 { --album-color: #018221; } /* ã‚¢ãƒ«ãƒãƒ 4ã®åŸºæº–è‰² */

/* ã‚¢ãƒ«ãƒãƒ 5ã®è‰²è¨­å®š */
.album-list li.album5-tab { 
  background-color: #9607a1;
  color: #ffffff; 
} /* ã‚¿ãƒ–ã®è‰² */
.album5 { --album-color: #9607a1; } /* ã‚¢ãƒ«ãƒãƒ 5ã®åŸºæº–è‰² */



/* ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã®ã‚¹ã‚¿ã‚¤ãƒ« */
.album-list li.album1, .album1 {
    position: relative;
    background: white; /* èƒŒæ™¯ã‚’ç™½ */
    color: black; /* æ–‡å­—ã‚’é»’ */
    padding-left: 30px; /* å·¦ã®è‰²ã‚¹ãƒšãƒ¼ã‚¹ã‚’ç¢ºä¿ */
    border: 1px solid #aaa;
}

.album-list li.album2, .album2 {
    position: relative;
    background: white; /* èƒŒæ™¯ã‚’ç™½ */
    color: black; /* æ–‡å­—ã‚’é»’ */
    padding-left: 30px; /* å·¦ã®è‰²ã‚¹ãƒšãƒ¼ã‚¹ã‚’ç¢ºä¿ */
    border: 1px solid #aaa;
}

.album-list li.album3, .album3 {
    position: relative;
    background: white; /* èƒŒæ™¯ã‚’ç™½ */
    color: black; /* æ–‡å­—ã‚’é»’ */
    padding-left: 30px; /* å·¦ã®è‰²ã‚¹ãƒšãƒ¼ã‚¹ã‚’ç¢ºä¿ */
    border: 1px solid #aaa;
}

.album-list li.album4, .album4 {
    position: relative;
    background: white; /* èƒŒæ™¯ã‚’ç™½ */
    color: black; /* æ–‡å­—ã‚’é»’ */
    padding-left: 30px; /* å·¦ã®è‰²ã‚¹ãƒšãƒ¼ã‚¹ã‚’ç¢ºä¿ */
    border: 1px solid #aaa;
}

.album-list li.album5, .album5 {
    position: relative;
    background: white; /* èƒŒæ™¯ã‚’ç™½ */
    color: black; /* æ–‡å­—ã‚’é»’ */
    padding-left: 30px; /* å·¦ã®è‰²ã‚¹ãƒšãƒ¼ã‚¹ã‚’ç¢ºä¿ */
    border: 1px solid #aaa;
}



/* å·¦ç«¯ã®ã‚«ãƒ©ãƒ¼å¸¯ */
.album-list li.album1::before, .album1::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 20px;
    height: 100%;
    background-color: #efefef; /* ã‚¢ãƒ«ãƒãƒ 1ã®è‰² */
}

.album-list li.album2::before, .album2::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 20px;
    height: 100%;
    background-color: rgba(255, 255, 2, 0.733); /* ã‚¢ãƒ«ãƒãƒ 2ã®è‰² */
}

.album-list li.album3::before, .album3::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 20px;
    height: 100%;
    background-color: #000000; /* ã‚¢ãƒ«ãƒãƒ 3ã®è‰² */
}

.album-list li.album4::before, .album4::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 20px;
    height: 100%;
    background-color: #018221; /* ã‚¢ãƒ«ãƒãƒ 4ã®è‰² */
}

.album-list li.album5::before, .album5::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 20px;
    height: 100%;
    background-color: #9607a1; /* ã‚¢ãƒ«ãƒãƒ 5ã®è‰² */
}

/* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—å‘ã‘ã«æœ€é©åŒ–ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã‚¹ãƒãƒ›å‘ã‘ã«ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å¤‰æ›´ã—ã¾ã™ */

/* ã‚¹ãƒãƒ›å‘ã‘ */
@media (max-width: 767px) {
    body {
        padding: 0;
        margin: 1
;
    }

    .menu-button {
        right: 15px; /* ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚¢ã‚¤ã‚³ãƒ³ã‚’å°‘ã—å³ã«å¯„ã›ã‚‹ */
        top: 15px;  /* ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚¢ã‚¤ã‚³ãƒ³ã‚’å°‘ã—ä¸Šã«å¯„ã›ã‚‹ */
    }

    .menu {
        width: 250px;  /* ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®å¹…ã‚’ç¸®å° */
    }

    .album-list li {
        font-size: 14px;  /* ã‚¹ãƒãƒ›ã‚µã‚¤ã‚ºã«åˆã‚ã›ã¦æ–‡å­—ã‚µã‚¤ã‚ºã‚’ç¸®å° */
    }

    .album-list li.album1-tab, .album-list li.album2-tab, .album-list li.album3-tab,
    .album-list li.album4-tab, .album-list li.album5-tab {
        padding: 8px 15px;  /* ã‚¿ãƒ–ã®å†…å´ã«å°‘ã—ä½™ç™½ã‚’è¿½åŠ  */
    }

    .album-list {
        padding: 0;
    }

    .album-content {
        padding: 5px;
    }

    /* ãƒ¡ãƒ‹ãƒ¥ãƒ¼å†…ã®ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .album-list li {
        padding: 8px 15px;
    }

    /* ã‚¿ãƒ–ã”ã¨ã®è‰²å¸¯ã‚’ç´°ã */
    .album-list li::before {
        width: 15px;
    }

    /* ã‚»ãƒƒãƒˆãƒªã‚¹ãƒˆ */
    #setlist {
        max-height: none; /* ã‚¹ãƒãƒ›ã§ã¯ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã®åˆ¶é™ã‚’è§£é™¤ */
    }

    /* ã‚¢ã‚¤ãƒ†ãƒ ã‚’ãƒ‰ãƒ©ãƒƒã‚°ã—ãŸã¨ãã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .dragging {
        opacity: 0.7;
    }

    /* ã‚»ãƒƒãƒˆãƒªã‚¹ãƒˆã®ã‚¢ã‚¤ãƒ†ãƒ ã«ä½™ç™½ã‚’ã¤ã‘ã¦è¦‹ã‚„ã™ãã™ã‚‹ */
    .item {
        padding-left: 30px;
        transition: transform 0.2s ease, opacity 0.2s ease;
    }

    .item.dragging {
    opacity: 0.5;
    transform: scale(1.05);
}

    /* ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ä¸­èº«ãŒé•·ããªã‚‹ã¨ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ */
    .menu {
        overflow-y: auto;
    }
}

/* ã‚¹ãƒãƒ›ç”¨ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ + ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¤ãƒ³ï¼‰ */
@keyframes fadeInSlide {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
/* ã‚¢ãƒ«ãƒãƒ ã‹ã‚‰ã‚»ãƒƒãƒˆãƒªã‚¹ãƒˆã«ã‚¢ã‚¤ãƒ†ãƒ ãŒã‚¹ãƒ©ã‚¤ãƒ‰ã—ã¦è¿½åŠ ã•ã‚Œã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
@keyframes slideInFromLeft {
    0% {
        transform: translateX(-100%);
        opacity: 0;
    }
    100% {
        transform: translateX(0);
        opacity: 1;
    }
}


    </style>
</head>
<body>

<h2>ã‚»ãƒƒãƒˆãƒªã‚¹ãƒˆ</h2>
<ul id="setlist"></ul>

<!-- ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
<div class="menu-button" id="menuButton" onclick="toggleMenu()">
    <span></span>
    <span></span>
    <span></span>
</div>
<div class="menu" id="menu">
    <div class="close-button" onclick="toggleMenu()"></div> <!-- âœ–ãƒœã‚¿ãƒ³ -->
    
    <h3>ã‚¢ãƒ«ãƒãƒ ã‚’é¸æŠ</h3>
    
    <!-- ã‚¢ãƒ«ãƒãƒ ãƒªã‚¹ãƒˆ -->
    <ul class="album-list">
        <li class="album1-tab" onclick="toggleAlbum(1)">SEãƒ»ã‚¤ãƒ³ã‚¹ãƒˆ</li>
        <ul class="album-content" id="album1">
            <li class="item album1" draggable="true">SE</li>
            <li class="item album1" draggable="true">MC</li>
            <li class="item album1" draggable="true">ã‚¤ãƒ³ã‚¹ãƒˆ</li>
        </ul>
    
        <li class="album2-tab" onclick="toggleAlbum(2)">Timeless</li>
        <ul class="album-content" id="album2">
            <li class="item album2" draggable="true">CHANCE!</li>
            <li class="item album2" draggable="true">ãƒˆã‚­ãƒãƒŠãƒŸãƒ€</li>
        </ul>
    
        <li class="album3-tab" onclick="toggleAlbum(3)">BUGRIGHT</li>
        <ul class="album-content" id="album3">
            <li class="item album3" draggable="true">ã‚¼ãƒ­ã®ç­”</li>
            <li class="item album3" draggable="true">SHAMROCK</li>
            <li class="item album3" draggable="true">SHAMROCK</li>
        </ul>
    
        <li class="album4-tab" onclick="toggleAlbum(4)">PROGLUTION</li>
        <ul class="album-content" id="album4">
            <li class="item album4" draggable="true">Roots</li>
            <li class="item album4" draggable="true">brand new ancient</li>
        </ul>
    
        <li class="album5-tab" onclick="toggleAlbum(5)">AwakEVE</li>
        <ul class="album-content" id="album5">
            <li class="item album5" draggable="true">æ¿€å‹•</li>
            <li class="item album5" draggable="true">99/100 é¨™ã—ã®å“²</li>
        </ul>
    
</div>

<script>
    const setlist = document.getElementById("setlist");
    let draggingItem = null;
    let touchStartX = 0;
    let touchStartY = 0;
    let touchMoveX = 0;
    let touchMoveY = 0;
    let lastTapTime = 0;
    const maxSongs = 24;
    const originalAlbumMap = new Map(); // å…ƒã®ã‚¢ãƒ«ãƒãƒ ã‚’è¨˜æ†¶
    
    function enableDragAndDrop(list) {
        list.querySelectorAll(".item").forEach(item => {
            if (!originalAlbumMap.has(item)) {
                originalAlbumMap.set(item, list);
            }
    
            // **PCç”¨ãƒ‰ãƒ©ãƒƒã‚°**
            item.addEventListener("dragstart", (event) => {
                draggingItem = item;
                item.classList.add("dragging");
                event.dataTransfer.setData("text/plain", "");
            });
    
            item.addEventListener("dragend", () => {
                finishDragging();
            });
    
            // **ã‚¹ãƒãƒ›ç”¨ã‚¿ãƒƒãƒãƒ‰ãƒ©ãƒƒã‚°**
            item.addEventListener("touchstart", (event) => {
                draggingItem = item;
                item.classList.add("dragging");
                item.style.zIndex = "1000"; // ğŸ‘ˆ ä¸€ç•ªä¸Šã«æŒã£ã¦ãã‚‹
                touchStartX = event.touches[0].clientX;
                touchStartY = event.touches[0].clientY;
                event.preventDefault();
            });
    
            item.addEventListener("touchmove", (event) => {
                if (!draggingItem) return;
                event.preventDefault();
                touchMoveX = event.touches[0].clientX;
                touchMoveY = event.touches[0].clientY;
    
                // **ä¸Šä¸‹å·¦å³è‡ªç”±ã«å‹•ã‹ã™**
                draggingItem.style.transition = "transform 0s"; 
                draggingItem.style.transform = `translate(${touchMoveX - touchStartX}px, ${touchMoveY - touchStartY}px)`;
            });
    
            item.addEventListener("touchend", (event) => {
                if (!draggingItem) return;
    
                const currentTime = new Date().getTime();
                if (currentTime - lastTapTime < 300) {  
                    restoreToOriginalList(item);
                    lastTapTime = 0; 
                    event.preventDefault();
                    return;
                }
                lastTapTime = currentTime;
    
                const touch = event.changedTouches[0];
                const dropTarget = document.elementFromPoint(touch.clientX, touch.clientY);
        
                if (dropTarget) {
                    handleDrop(dropTarget, touch.clientY);
                }
    
                draggingItem.style.transition = "transform 0.2s ease";
                draggingItem.style.transform = "translate(0, 0)"; 
                setTimeout(() => {
                    draggingItem.style.transition = "";
                }, 200);
    
                finishDragging();
            });
    
            // **ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã§å…ƒã®ãƒªã‚¹ãƒˆã«æˆ»ã™**
            item.addEventListener("dblclick", () => {
                restoreToOriginalList(item);
            });
        });
    
        list.addEventListener("dragover", (event) => {
            event.preventDefault();
            if (!draggingItem) return;
    
            const closestItem = getClosestItem(event.clientY);
            if (closestItem) {
                const bounding = closestItem.getBoundingClientRect();
                const offset = event.clientY - bounding.top;
                if (offset > bounding.height / 2) {
                    closestItem.after(draggingItem);
                } else {
                    closestItem.before(draggingItem);
                }
            }
        });
    
        list.addEventListener("drop", (event) => {
            event.preventDefault();
            if (!draggingItem) return;
            handleDrop(event.target, event.clientY);
            finishDragging();
        });
    }
    
    function getClosestItem(y) {
        const items = [...setlist.children];
        return items.reduce((closest, child) => {
            const box = child.getBoundingClientRect();
            const offset = y - box.top - box.height / 2;
            if (offset < 0 && offset > closest.offset) {
                return { offset, element: child };
            } else {
                return closest;
            }
        }, { offset: Number.NEGATIVE_INFINITY }).element;
    }
    
    function handleDrop(target, y) {
        let dropList = setlist;
    
        while (target && target !== document.body) {
            if (target === setlist) {
                dropList = setlist;
                break;
            }
            target = target.parentElement;
        }
    
        if (dropList === setlist && setlist.children.length < maxSongs) {
            const closestItem = getClosestItem(y);
            if (closestItem) {
                const bounding = closestItem.getBoundingClientRect();
                const offset = y - bounding.top;
                if (offset > bounding.height / 2) {
                    closestItem.after(draggingItem);
                } else {
                    closestItem.before(draggingItem);
                }
            } else {
                setlist.appendChild(draggingItem);
            }
        }
    }
    
    function finishDragging() {
        if (!draggingItem) return;
        draggingItem.classList.remove("dragging");
        draggingItem.style.zIndex = ""; // ğŸ‘ˆ å…ƒã®çŠ¶æ…‹ã«æˆ»ã™
        draggingItem = null;
    }
    
    // **å…ƒã®ãƒªã‚¹ãƒˆã«æˆ»ã™å‡¦ç†**
    function restoreToOriginalList(item) {
        const originalList = originalAlbumMap.get(item);
        if (originalList) {
            originalList.appendChild(item);
        }
    }
    
    function toggleMenu() {
        const menu = document.getElementById("menu");
        const menuButton = document.getElementById("menuButton");
    
        menu.classList.toggle("open");
        menuButton.classList.toggle("open");
    }
    
    function toggleAlbum(albumIndex) {
        document.querySelectorAll(".album-content").forEach(content => {
            if (content.id === "album" + albumIndex) {
                content.classList.toggle("active");
            } else {
                content.classList.remove("active");
            }
        });
    }
    
    enableDragAndDrop(setlist);
    document.querySelectorAll(".album-content").forEach(enableDragAndDrop);
    </script>
    
    

</body>
</html>

